
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HSK Flashcards v2.9</title>
  <link rel="manifest" href="manifest.webmanifest" />
  <style>
    body { font-family: sans-serif; text-align: center; padding: 20px; }
    button { margin: 5px; padding: 10px 20px; font-size: 16px; }
    .flashcard { border: 1px solid #ccc; border-radius: 12px; padding: 40px; margin: 20px auto; width: 80%; min-height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center; }
    .hidden { display: none; }

    /* Mandarin start side */
    .mandarin .hanzi { font-size: 72px; } /* big */
    .mandarin .pinyin { font-size: 42px; margin-top: 10px; } /* bigger pinyin */

    .mandarin-flip .english { font-size: 32px; margin-bottom: 20px; }
    .mandarin-flip .hanzi { font-size: 36px; } /* smaller characters */

    /* English start side */
    .english .english { font-size: 28px; } /* slightly smaller */
    
    .english-flip .hanzi { font-size: 72px; margin-bottom: 15px; } /* big characters */
    .english-flip .pinyin { font-size: 42px; margin-bottom: 15px; } /* visible + bigger */
    .english-flip .english { font-size: 18px; } /* much smaller */
  </style>
</head>
<body>
  <h1>HSK 1-2 Flashcards v2.9</h1>
  <button onclick="loadDeck()">Load Preloaded HSK 1-2</button>
  <button onclick="startSession('mandarin')">Start Mandarin Side</button>
  <button onclick="startSession('english')">Start English Side</button>
  <div id="flashcard" class="flashcard hidden" onclick="flipCard()"></div>
  <button onclick="nextCard()">Next</button>

  <script>
    let deck = [];
    let current = 0;
    let showingFront = true;
    let startSide = "mandarin";

    async function loadDeck() {
      const response = await fetch('hsk12.json');
      deck = await response.json();
      alert("HSK 1-2 loaded! " + deck.length + " cards.");
    }

    function startSession(side) {
      if (deck.length === 0) { alert("Load deck first!"); return; }
      startSide = side;
      current = 0;
      showingFront = true;
      document.getElementById("flashcard").classList.remove("hidden");
      renderCard();
    }

    function renderCard() {
      const card = deck[current];
      const div = document.getElementById("flashcard");
      let html = "";
      if (showingFront) {
        if (startSide === "mandarin") {
          div.className = "flashcard mandarin";
          html = `<div class="hanzi">${card.hanzi}</div><div class="pinyin">${card.pinyin}</div>`;
        } else {
          div.className = "flashcard english";
          html = `<div class="english">${card.english}</div>`;
        }
      } else {
        if (startSide === "mandarin") {
          div.className = "flashcard mandarin-flip";
          html = `<div class="english">${card.english}</div><div class="hanzi">${card.hanzi}</div>`;
        } else {
          div.className = "flashcard english-flip";
          html = `<div class="hanzi">${card.hanzi}</div><div class="pinyin">${card.pinyin}</div><div class="english">${card.english}</div>`;
        }
      }
      div.innerHTML = html;
    }

    function flipCard() {
      showingFront = !showingFront;
      renderCard();
    }

    function nextCard() {
      current = (current + 1) % deck.length;
      showingFront = true;
      renderCard();
    }
  </script>
</body>
</html>
